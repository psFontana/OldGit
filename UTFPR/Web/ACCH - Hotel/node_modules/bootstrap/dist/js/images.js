const addPhotoForm = document.getElementById('addPhotoForm');
const photoList = document.getElementById('photoList');
const imagesText = document.getElementById('imgText')
let photos = JSON.parse(localStorage.getItem('hotelPhotos')) || ['https://dirgrad.dv.utfpr.edu.br/site/wp-content/uploads/2022/05/bloco_k-1920x692.jpg', 'https://www.utfpr.edu.br/campus/doisvizinhos/sobre/dois.JPG/@@images/image', 'https://rbj.com.br/wp-content/uploads/2022/06/image-1920x1280.jpeg'];

function loadSavedPhotos() {
  if (photos.length > 0) {
    photos.forEach(photo => {
      const listItem = document.createElement('li');
      listItem.className = 'list-group-item d-flex justify-content-evenly align-items-center';
      const button = document.createElement("button");
      button.type = "button"
      // button.style.width = "10%"
      button.innerText = 'Remover'
      button.className = 'btn btn-danger btn-sm py-1 m-3';
      button.addEventListener("click", (ev) => {
        photos = photos.filter(p => p !== photo)
        localStorage.setItem('hotelPhotos', JSON.stringify(photos));
        listItem.remove()
        imagesText.innerText = photos.length == 0 ? 'Nenhuma Imagem Atribuida' : 'Imagens Existentes'
      })
      const img = document.createElement("img")
      img.src = photo
      // img.style.width = '70%'
      // img.style.height = '400px'
      img.alt = "Apenas uma imagem"
      listItem.appendChild(button)
      listItem.appendChild(img)
      photoList.appendChild(listItem);
    });
  } else {
    imagesText.innerText = 'Nenhuma Imagem Atribuida'
  }
}

addPhotoForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const photoUrl = document.getElementById('photoUrl').value;
  if (photoUrl) {
    photos.push(photoUrl);
    localStorage.setItem('hotelPhotos', JSON.stringify(photos));
    const listItem = document.createElement('li');
    listItem.className = 'list-group-item d-flex justify-content-between align-items-center';
    const button = document.createElement("button");
    button.type = "button"
    button.innerText = 'Remover'
    button.className = 'btn btn-danger btn-sm';
    button.style.width = '400px'
    button.addEventListener("click", (ev) => {
      photos = photos.filter(p => p !== photoUrl)
      localStorage.setItem('hotelPhotos', JSON.stringify(photos));
      listItem.remove()
      imagesText.innerText = photos.length == 0 ? 'Nenhuma Imagem Atribuida' : 'Imagens Existentes'
    })
    const img = document.createElement("img")
    img.src = photoUrl
    img.style.width = '8000px'
    img.style.height = '400px'
    img.alt = "Apenas uma imagem"
    listItem.appendChild(img)
    listItem.appendChild(button)
    photoList.appendChild(listItem);
  }
  imagesText.innerText = 'Imagens Existentes'
});



const editDataForm = document.getElementById('editDataForm');
editDataForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const siteDescription = document.getElementById('siteDescription').value;
  const contactInfo = document.getElementById('contactInfo').value;

  localStorage.setItem('hotelDescription', siteDescription);

  localStorage.setItem('contactInfo', contactInfo);

  alert(`Dados salvos!\nDescrição: ${siteDescription}\nContato: ${contactInfo}`);
});

document.addEventListener('DOMContentLoaded', () => {
  loadSavedPhotos();

  const savedDescription = localStorage.getItem('hotelDescription');
  if (savedDescription) {
    document.getElementById('siteDescription').value = savedDescription;
  }

  const savedContactInfo = localStorage.getItem('contactInfo');
  if (savedContactInfo) {
    document.getElementById('contactInfo').value = savedContactInfo;
  }
});
